<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Twitter Bookmark to Notion - 设置</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>⚙️ Twitter Bookmark to Notion</h1>
      <p class="subtitle">自动将Twitter书签同步到Notion并智能分类</p>
    </header>

    <main>
      <!-- Notion配置 -->
      <section class="section">
        <h2>📝 Notion配置</h2>
        <div class="form-group">
          <label for="notionApiKey">Notion API密钥 *</label>
          <input type="password" id="notionApiKey" placeholder="secret_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx">
          <small>
            在 <a href="https://www.notion.so/my-integrations" target="_blank">Notion Integrations</a> 创建Integration获取
          </small>
        </div>

        <div class="form-group">
          <label for="notionDatabaseId">Database ID *</label>
          <input type="text" id="notionDatabaseId" placeholder="32位字符串">
          <small>
            在Notion数据库URL中找到: notion.so/[workspace]/[database_id]?v=...
          </small>
        </div>

        <button id="testNotionBtn" class="btn btn-primary">测试Notion连接</button>
        <div id="notionStatus" class="status"></div>
      </section>

      <!-- AI配置 -->
      <section class="section">
        <h2>🤖 AI分类配置</h2>
        <div class="form-group">
          <label for="aiProvider">AI提供商</label>
          <select id="aiProvider">
            <option value="gemini">Google Gemini (免费)</option>
            <option value="none">关闭AI分类</option>
          </select>
        </div>

        <div class="form-group" id="geminiKeyGroup">
          <label for="geminiApiKey">Gemini API密钥</label>
          <input type="password" id="geminiApiKey" placeholder="AIzaSyxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx">
          <small>
            在 <a href="https://makersuite.google.com/app/apikey" target="_blank">Google AI Studio</a> 获取免费API密钥
          </small>
        </div>

        <button id="testAIBtn" class="btn btn-secondary">测试AI分类</button>
        <div id="aiStatus" class="status"></div>
      </section>

      <!-- 同步设置 -->
      <section class="section">
        <h2>🔄 同步设置</h2>
        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="enableAutoSync" checked>
            启用自动同步
          </label>
          <small>禁用后将不会自动同步书签,需要手动同步</small>
        </div>
      </section>

      <!-- 同步历史 -->
      <section class="section">
        <h2>📊 同步历史</h2>
        <div class="history-controls">
          <button id="refreshHistoryBtn" class="btn btn-secondary">刷新</button>
          <button id="retryFailedBtn" class="btn btn-secondary">重试失败项</button>
        </div>
        <div id="historyContainer">
          <table id="historyTable">
            <thead>
              <tr>
                <th>时间</th>
                <th>推文</th>
                <th>分类</th>
                <th>状态</th>
              </tr>
            </thead>
            <tbody id="historyBody">
              <tr>
                <td colspan="4" class="empty-message">暂无同步记录</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- 保存按钮 -->
      <div class="actions">
        <button id="saveBtn" class="btn btn-success">💾 保存设置</button>
        <div id="saveStatus" class="status"></div>
      </div>
    </main>

    <footer>
      <p>Version 1.0.0 | <a href="https://github.com" target="_blank">GitHub</a></p>
    </footer>
  </div>

  <script src="options.js"></script>
</body>
</html>
